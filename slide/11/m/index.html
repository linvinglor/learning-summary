<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Untitled Document</title>
    <style>
        *{ margin:0; padding:0; }
        ul{ list-style:none; }
        body{ font-size:12px; line-height:1.5; }
        #box{ margin:100px auto; width:1000px; height:400px; position:relative; }
        #box li{ width:300px; height:400px; position:absolute; top:0; left:0; background:#333; text-align:center; font-size:150px; font-weight:700; color:#fff; z-index:0; cursor:pointer; overflow:hidden; background:#000; }
        #box li img{ width:100%; height:100%; opacity:.35; filter:alpha(opacity=35) }
        #prev, #next{ position:absolute; top:50%; margin-top:-25px; width:50px; height:50px; background:red; color:#fff; font-weight:700; text-align:center; line-height:50px; }
        #prev{ left:-50px; }
        #next{ right:-50px; }
        #text{ background:#000; color:#fff; position:absolute; top:410px; left:0; height:100px; overflow:hidden; width:1000px; }
        #text div{ position:absolute; top:100px; left:0; padding:10px; }
    </style>
</head>
<body>
<div id="box">
    <a href="#" id="prev">prev</a>
    <ul>
        <li><img src="../images/1.jpg" alt="" title=""/></li>
        <li><img src="../images/2.jpg" alt="" title=""/></li>
        <li><img src="../images/3.jpg" alt="" title=""/></li>
        <li><img src="../images/4.jpg" alt="" title=""/></li>
        <li><img src="../images/5.jpg" alt="" title=""/></li>
        <li><img src="../images/6.jpg" alt="" title=""/></li>
        <li><img src="../images/7.jpg" alt="" title=""/></li>
        <li><img src="../images/8.jpg" alt="" title=""/></li>
        <li><img src="../images/1.jpg" alt="" title=""/></li>
        <li><img src="../images/2.jpg" alt="" title=""/></li>
        <li><img src="../images/3.jpg" alt="" title=""/></li>
        <li><img src="../images/4.jpg" alt="" title=""/></li>
        <li><img src="../images/5.jpg" alt="" title=""/></li>
        <li><img src="../images/6.jpg" alt="" title=""/></li>
        <li><img src="../images/7.jpg" alt="" title=""/></li>
    </ul>
    <div id="text">
        <div>1暴雪或将像EA 、Zynga等知名游戏公司一样，开始研发iOS平台的移动游戏。</div>
        <div>2这将是暴雪粉丝和苹果粉丝最为高兴的一条新闻了，在iOS领域，对暴雪来说的确是块处女地，确实是有着可以令暴雪大展拳脚的空间</div>
        <div>3据国外媒体报道，暴雪公司(Blizzard)《魔兽世界》的首席设计师格雷格·斯垂特(Greg Street)最近表示，公司有意针对iPhone和iPad等苹果iOS设备开发游戏</div>
        <div>4暴雪公司对于产品品质的要求苛刻到难以想象，他们甚至不惜用无限期的跳票来换取游戏的完美表现，而这也保证了“暴雪出品必属经典”这块金金字招牌屹立十余年不倒</div>
        <div>5因此，力求“完美大作”的暴雪若真的投身iOS开发游戏，那么很有可能将会出现一款新的标杆式的iOS 游戏，而它若成功延续暴雪的光环，那么未来iOS游戏的体验也或被提升到一个新的高度。</div>
        <div>6北京时间2月23日消息，据国外网站报道宏碁Iconia Tab A510 终于获得了FCC批准，这款四核心的平板电脑准备在美国市场上出售。</div>
        <div>7宏碁Iconia Tab A510搭载谷歌Android 4.0冰淇淋三明治和新一代1.3GHz NVIDIA Tegra 3四核处理器</div>
        <div>8平板还配备了10.1英寸1280×800像素的触摸屏，Wi-Fi连接，后置500万像素和前置130万像素摄像头，杜比移动音效</div>
        <div>9宏碁Iconia Tab A510搭载谷歌Android 4.0冰淇淋三明治和新一代1.3GHz NVIDIA Tegra 3四核处理器。平板还配备了10.1英寸1280×800像素的触摸屏</div>
        <div>10Wi-Fi连接，后置500万像素和前置130万像素摄像头，杜比移动音效，HDMI输出和16GB的内置存储空间，配备蓝牙、Wi-Fi 和 GPS 等「指定」的规格，而 3G 或是 4G 规格则尚无数据。</div>
        <div>11值得注意的是，宏碁Iconia Tab A510将于三月登陆欧洲市场，售价为399欧元（约528美元）</div>
        <div>12Google今天宣布，Google Translate服务刚刚加入了对第46种语言的支持，不过该语言相当特殊，不是来自某个国家或地区，而是“世界语”(Esperanto)</div>
        <div>13世界语又称国际语，是波兰医生柴门霍夫(Ludovic Lazarus Zamenhof)人为创造的语种，1887年发表于他的著作《第一本书》(Unua Libro)，其目的是希望所有人分享，以此实现世界语言的大同，打破“巴别塔”障碍</div>
        <div>14当然，愿望是美好的，现实中却是行不通的，125年之后说这种语言的全球也不过几万人，还有一些从出生就跟着父母学习。</div>
        <div>15Google表示，支持世界语很大程度上是象征性的，目的是强调Google翻译服务和世界语的目标一样，都是加强和简化人与人之间的交流。</div>
    </div>
    <a href="#" id="next">next</a>
</div>
<script>
    function slide(){
        return this.init.apply(this, arguments);
    }
    slide.prototype = {
        init : function(opts){
            var opt = this.extend({
                outerID : 'box',
                textBoxID : 'text',
                prev : 'prev',
                next : 'next',
                disNum : 5,//默认显示个数
                sacle : 0.8,//缩放比例
                width : 700,//原始图片宽度
                height : 280,//原始图片高度
                auto : false,//是否自动切换
                timer : 5000//自动切换时间间隔
            }, opts || {});
            var _this = this;
            this.opt = opt;
            this.outer = this.$(opt.outerID);
            this.prev = this.$(opt.prev);
            this.next = this.$(opt.next);
            this.oUl = this.outer.getElementsByTagName('ul')[0];
            this.lis = this.oUl.getElementsByTagName('li');
            this.text = document.getElementById(opt.textBoxID).getElementsByTagName('div');
            this.len = this.lis.length;
            this.outerWidth = this.outer.offsetWidth;
            this.iCenter = Math.floor(opt.disNum / 2); // '中间的那个数'
            this.space = Math.round((this.outerWidth - opt.width) / (opt.disNum - 1)); // '按钮与中间图之间的距离'
            this.iSort = []; // '图片排序数组'
            this.tSort = []; // '文本描述排序数组'
            this.property = []; // '属性列表'
            this.timer = null;
            this.sliding = false;
            this.p = {'width' : 50, 'height' : 50, 'top' : opt.height / 2, 'left' : this.outerWidth / 2, 'zIndex' : 0}; /// '临时数组列表'
            this.cretaeProperty(); // '创建数组列表'
            for(var i = 0; i < this.len; i++){
                this.iSort.push(this.lis[i]), this.tSort.push(this.text[i])
            }
            this.iSort.unshift(this.iSort.pop());
            this.tSort.unshift(this.tSort.pop());
            if(opt.auto){
                this.timer = setInterval(function(){
                    _this.doNext();
                }, opt.timer);
            }
            this.itemHandler(); // 绑定图片事件
            this.outerHandler(); // 给box绑定经过，离开事件
            this.slider(); // 控制图片切换
            this.prev.onclick = function(){
                _this.doPrev();
            }
            this.next.onclick = function(){
                _this.doNext();
            }
        },
        // 给box绑定经过，离开事件
        outerHandler : function(){
            var _this = this, opt = this.opt;
            this.outer.onmouseover = function(){
                if(_this.timer) clearInterval(_this.timer);
            };
            this.outer.onmouseout = function(){
                if(opt.auto){
                    _this.timer = setInterval(function(){
                        _this.doNext();
                    }, opt.timer);
                }
            }
        },
        // 绑定图片单击，鼠标经过，离开等事件
        itemHandler : function(){
            var opt = this.opt, _this = this;
            for(var i = 0; i < this.len; i++){
                (function(i){
                    _this.iSort[i].onclick = function(){
                        if(_this.sliding) return;
                        _this.sliding = true;
                        var m = this.index - 1;
                        if(m < _this.iCenter){
                            for(var k = 0; k < _this.iCenter - m; k++){
                                _this.iSort.unshift(_this.iSort.pop());
                                _this.tSort.unshift(_this.tSort.pop());
                            }
                            _this.slider();
                        } else if(m > _this.iCenter){
                            for(var k = 0; k < m - _this.iCenter; k++){
                                _this.iSort.push(_this.iSort.shift());
                                _this.tSort.push(_this.tSort.shift());
                            }
                            _this.slider();
                        }
                    };
                    _this.iSort[i].onmouseover = function(){
                        var m = this.index - 1;
                        if(m == _this.iCenter) return;
                        var img = this.getElementsByTagName('img')[0];
                        _this.animate(img, {'opacity' : 1});
                    };
                    _this.iSort[i].onmouseout = function(){
                        var m = this.index - 1;
                        if(m == _this.iCenter) return;
                        var img = this.getElementsByTagName('img')[0];
                        _this.animate(img, {'opacity' : .35});
                    }
                })(i);
            }
        },
        doPrev : function(){
            if(this.sliding) return;
            this.sliding = true;
            this.iSort.unshift(this.iSort.pop());
            this.tSort.unshift(this.tSort.pop());
            this.slider();
        },
        doNext : function(){
            if(this.sliding) return;
            this.sliding = true;
            this.iSort.push(this.iSort.shift());
            this.tSort.push(this.tSort.shift());
            this.slider();
        },
        // 控制图片切换
        slider : function(){
            var opt = this.opt, _this = this;
            for(i = 0; i < this.iSort.length; i++) this.oUl.appendChild(this.iSort[i]);
            for(i = 0; i < this.iSort.length; i++){
                this.iSort[i].index = i;
                if(i < opt.disNum + 2){
                    this.css(this.iSort[i], {'display' : 'block'});
                    this.animate(_this.tSort[_this.iCenter + 1], {'top' : 0});
                    this.animate(this.iSort[i], this.property[i], function(){
                        _this.animate(_this.iSort[_this.iCenter + 1].getElementsByTagName('img')[0], {'opacity' : 1}, function(){
                            _this.sliding = false;
                        });
                    })
                } else {
                    this.css(this.iSort[i], {
                        'width' : 50,
                        'height' : 50,
                        'display' : 'none',
                        'top' : opt.height / 2,
                        'left' : this.outerWidth / 2
                    })
                }
                if(i != this.iCenter + 1){
                    this.css(this.iSort[i].getElementsByTagName('img')[0], {'opacity' : '.35'});
                    this.css(this.tSort[i], 'top', 100);
                }
            }
        },
        $ : function(id){
            return typeof id == 'string' ? document.getElementById(id) : id
        },
        css : function(el, key, value){
            if(arguments.length === 3){
                this.setStyle(el, key, value);
            } else if(arguments.length === 2){
                if(typeof key == 'string'){
                    key = key.replace(/-\w/g, function(a){
                        return a.charAt(1).toUpperCase()
                    });
                    return (el.style[key] == '') ? (el.currentStyle || document.defaultView.getComputedStyle(el, null))[key] : el.style[key];
                } else if(typeof key == 'object'){
                    for(var name in key){
                        this.setStyle(el, name, key[name]);
                    }
                }
            }
        },
        setStyle : function(el, key, value){
            var reg = /(width|height|top|left|right|bottom)/ig;
            key = key.replace(/-\w/g, function(a){
                return a.charAt(1).toUpperCase()
            });
            if(reg.test(key)){
                el.style[key] = value + 'px';
            } else if(key === 'opacity'){
                el.style.filter = "alpha(opacity=" + value * 100 + ")";
                el.style.opacity = value;
            } else {
                el.style[key] = value;
            }
        },
        // '创建一个可循环的不等层次的属性列表'
        cretaeProperty : function(){
            var opt = this.opt;
            var i = 0, j = 0, len = opt.disNum;
            this.property.push(this.p);
            for(; i < len; i++){
                if(i <= this.iCenter){
                    this.property.push({
                        'width' : Math.round(opt.width * Math.pow(opt.sacle, this.iCenter - i)),
                        'height' : Math.round(opt.height * Math.pow(opt.sacle, this.iCenter - i)),
                        'left' : i * this.space,
                        'top' : Math.round((opt.height - Math.round(opt.height * Math.pow(opt.sacle, this.iCenter - i))) / 2),
                        'zIndex' : i
                    });
                } else {
                    this.property.push({
                        'width' : Math.round(opt.width * Math.pow(opt.sacle, i - this.iCenter)),
                        'height' : Math.round(opt.height * Math.pow(opt.sacle, i - this.iCenter)),
                        'left' : this.outerWidth - (this.iCenter - (i % this.iCenter ? i % this.iCenter : this.iCenter)) * this.space - Math.round(opt.width * Math.pow(opt.sacle, i - this.iCenter)),
                        'top' : Math.round((opt.height - Math.round(opt.height * Math.pow(opt.sacle, i - this.iCenter))) / 2),
                        'zIndex' : this.iCenter - (i % this.iCenter ? i % this.iCenter : this.iCenter)
                    });
                }
            }
            this.property.push(this.p);
        },
        animate : function(el, opts, callback, aniFn){
            var _easeInOutCubic = function(pos){
                if((pos /= 0.5) < 1) return 0.5 * Math.pow(pos, 3);
                return 0.5 * (Math.pow((pos - 2), 3) + 2);
            };
            opts = opts || {};
            var _this = this;
            var deStyle = {}, D = Date, d = new D, e, T = 500, o, F = function(x){
                return (aniFn || _easeInOutCubic)(x)
            };
            for(var i in opts){
                if(i == 'opacity') deStyle[i] = this.css(el, i); else deStyle[i] = parseInt(this.css(el, i));
            }
            return e = setInterval(function(){
                var z = Math.min(1, (new D - d) / T);
                for(var i in opts){
                    o = deStyle[i] - 0 + (opts[i] - deStyle[i]) * F(z);
                    _this.css(el, i, o);
                }
                if(z === 1){
                    clearInterval(e);
                    if(callback && typeof callback == 'function') callback();
                }
            }, 16);
        },
        extend : function(target, source){
            for(var key in source) target[key] = source[key];
            return target;
        }
    }
</script>
<script>
    new slide();
</script>
</body>
</html>